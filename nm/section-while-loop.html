<!DOCTYPE html>
<!--**************************************-->
<!--*    Generated from PreTeXt source   *-->
<!--*    on 2020-06-23T20:51:18-04:00    *-->
<!--*                                    *-->
<!--*      https://pretextbook.org       *-->
<!--*                                    *-->
<!--**************************************-->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>
<code class="code-inline tex2jax_ignore">while</code> loop</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['\\(','\\)']]
    },
    asciimath2jax: {
        ignoreClass: ".*",
        processClass: "has_am"
    },
    jax: ["input/AsciiMath"],
    extensions: ["asciimath2jax.js"],
    TeX: {
        extensions: ["extpfeil.js", "autobold.js", "https://pretextbook.org/js/lib/mathjaxknowl.js", "AMScd.js", ],
        // scrolling to fragment identifiers is controlled by other Javascript
        positionToHash: false,
        equationNumbers: { autoNumber: "none", useLabelIds: true, },
        TagSide: "right",
        TagIndent: ".8em",
    },
    // HTML-CSS output Jax to be dropped for MathJax 3.0
    "HTML-CSS": {
        scale: 88,
        mtextFontInherit: true,
    },
    CommonHTML: {
        scale: 88,
        mtextFontInherit: true,
    },
});
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML-full"></script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.13/pretext.js"></script><script src="https://pretextbook.org/js/0.13/pretext_add_on.js"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/colors_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/setcolors.css" rel="stylesheet" type="text/css">
<!-- 2019-10-12: Temporary - CSS file for experiments with styling --><link href="developer.css" rel="stylesheet" type="text/css">
</head>
<body class="mathbook-book has-toc has-sidebar-left">
<a class="assistive" href="#content">Skip to main content</a><div class="hidden-content" style="display:none">\(
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\)</div>
<header id="masthead" class="smallbuttons"><div class="banner"><div class="container">
<a id="logo-link" href=""></a><div class="title-container">
<h1 class="heading"><a href="numerical-methods.html"><span class="title">Numerical Methods with Programming:</span> <span class="subtitle">Lecture Notes</span></a></h1>
<p class="byline">Leonid Kovalev</p>
</div>
</div></div>
<nav id="primary-navbar" class="navbar"><div class="container">
<div class="navbar-top-buttons">
<button class="sidebar-left-toggle-button button active" aria-label="Show or hide table of contents sidebar">Contents</button><div class="tree-nav toolbar toolbar-divisor-3"><span class="threebuttons"><a id="previousbutton" class="previous-button toolbar-item button" href="section-for-loop.html" title="Previous">Prev</a><a id="upbutton" class="up-button button toolbar-item" href="systems-control-flow.html" title="Up">Up</a><a id="nextbutton" class="next-button button toolbar-item" href="section-if-statement.html" title="Next">Next</a></span></div>
</div>
<div class="navbar-bottom-buttons toolbar toolbar-divisor-4">
<button class="sidebar-left-toggle-button button toolbar-item active">Contents</button><a class="previous-button toolbar-item button" href="section-for-loop.html" title="Previous">Prev</a><a class="up-button button toolbar-item" href="systems-control-flow.html" title="Up">Up</a><a class="next-button button toolbar-item" href="section-if-statement.html" title="Next">Next</a>
</div>
</div></nav></header><div class="page">
<div id="sidebar-left" class="sidebar" role="navigation"><div class="sidebar-content">
<nav id="toc"><ul>
<li class="link frontmatter">
<a href="frontmatter.html" data-scroll="frontmatter"><span class="title">Front Matter</span></a><ul>
<li><a href="acknowledgement.html" data-scroll="acknowledgement">Acknowledgements</a></li>
<li><a href="preface.html" data-scroll="preface">Preface</a></li>
</ul>
</li>
<li class="link part"><a href="part-matlab.html" data-scroll="part-matlab"><span class="codenumber">I</span> <span class="title">Using Matlab</span></a></li>
<li class="link">
<a href="scalars-vectors-matrices.html" data-scroll="scalars-vectors-matrices"><span class="codenumber">1</span> <span class="title">Scalars, vectors and matrices</span></a><ul>
<li><a href="section-matlab-interface.html" data-scroll="section-matlab-interface">Matlab interface</a></li>
<li><a href="section-scalars.html" data-scroll="section-scalars">Assigning scalar values</a></li>
<li><a href="section-vectors-matrices.html" data-scroll="section-vectors-matrices">Creating vectors and matrices</a></li>
<li><a href="section-operations-vectors-matrices.html" data-scroll="section-operations-vectors-matrices">Operations on vectors and matrices</a></li>
<li><a href="section-indexing-vectors-matrices.html" data-scroll="section-indexing-vectors-matrices">Accessing the entries of vectors and matrices</a></li>
<li><a href="examples-matrices-vectors.html" data-scroll="examples-matrices-vectors">End-of-class examples</a></li>
<li><a href="exercises-matrices-vectors.html" data-scroll="exercises-matrices-vectors">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="systems-vectorization-plots.html" data-scroll="systems-vectorization-plots"><span class="codenumber">2</span> <span class="title">Linear systems, array operations, plots</span></a><ul>
<li><a href="section-linear-systems.html" data-scroll="section-linear-systems">Systems of linear equations</a></li>
<li><a href="section-large-matrices.html" data-scroll="section-large-matrices">More tools for constructing matrices</a></li>
<li><a href="section-vectorization.html" data-scroll="section-vectorization">Array operations</a></li>
<li><a href="section-plotting.html" data-scroll="section-plotting">Plotting</a></li>
<li><a href="examples-systems-vectorization-plots.html" data-scroll="examples-systems-vectorization-plots">End-of-class examples</a></li>
<li><a href="exercises-systems-vectorization-plots.html" data-scroll="exercises-systems-vectorization-plots">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="systems-functions-input-output.html" data-scroll="systems-functions-input-output"><span class="codenumber">3</span> <span class="title">Built-in functions, input, output</span></a><ul>
<li><a href="section-builtin-functions.html" data-scroll="section-builtin-functions">Built-in functions</a></li>
<li><a href="section-random-numbers-histograms.html" data-scroll="section-random-numbers-histograms">Random numbers and histograms</a></li>
<li><a href="section-user-input.html" data-scroll="section-user-input">User input</a></li>
<li><a href="section-formatted-output.html" data-scroll="section-formatted-output">Formatted output</a></li>
<li><a href="examples-functions-input-output.html" data-scroll="examples-functions-input-output">End-of-class examples</a></li>
<li><a href="exercises-functions-input-output.html" data-scroll="exercises-functions-input-output">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="systems-control-flow.html" data-scroll="systems-control-flow"><span class="codenumber">4</span> <span class="title">Control flow: loops and conditional statements</span></a><ul>
<li><a href="section-for-loop.html" data-scroll="section-for-loop"><code class="code-inline tex2jax_ignore">for</code> loop</a></li>
<li><a href="section-while-loop.html" data-scroll="section-while-loop" class="active"><code class="code-inline tex2jax_ignore">while</code> loop</a></li>
<li><a href="section-if-statement.html" data-scroll="section-if-statement"><code class="code-inline tex2jax_ignore">if</code> statement</a></li>
<li><a href="section-break-statement.html" data-scroll="section-break-statement">Breaking out of a loop</a></li>
<li><a href="examples-control-flow.html" data-scroll="examples-control-flow">End-of-class examples</a></li>
<li><a href="exercises-control-flow.html" data-scroll="exercises-control-flow">Homework</a></li>
</ul>
</li>
<li class="link part"><a href="part-equations.html" data-scroll="part-equations"><span class="codenumber">II</span> <span class="title">Solving Equations</span></a></li>
<li class="link part"><a href="part-calculus.html" data-scroll="part-calculus"><span class="codenumber">III</span> <span class="title">Numerical Calculus</span></a></li>
<li class="link part"><a href="part-data.html" data-scroll="part-data"><span class="codenumber">IV</span> <span class="title">Modeling Data</span></a></li>
<li class="link part"><a href="part-optimization.html" data-scroll="part-optimization"><span class="codenumber">V</span> <span class="title">Optimization</span></a></li>
</ul></nav><div class="extras"><nav><a class="mathbook-link" href="https://pretextbook.org">Authored in PreTeXt</a><a href="https://www.mathjax.org"><img title="Powered by MathJax" src="https://www.mathjax.org/badge/badge.gif" alt="Powered by MathJax"></a></nav></div>
</div></div>
<main class="main"><div id="content" class="pretext-content"><section class="section" id="section-while-loop"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">4.2</span> <span class="title"><code class="code-inline tex2jax_ignore">while</code> loop</span>
</h2>
<p id="p-122">In <a class="xref" data-knowl="./knowl/example-agm-for-loop.html" title="Example 4.1.2: Arithmetic-geometric mean using a for loop">Example 4.1.2</a> we used 10 iterations of arithmetic and geometric means computation. This was an arbitrary number. For some input values it may be enough or too many, for others not enough. A better approach is to stop the computation when the required precision is achieved. If we want the result to be accurate within \(10^{-9}\text{,}\) which is <code class="code-inline tex2jax_ignore">1e-9</code> in Matlab notation, then we can stop as soon as the difference between the two means has absolute value less than that number (called the <dfn class="terminology">tolerance</dfn>). This is what <code class="code-inline tex2jax_ignore">while</code> loop can be used for.</p>
<p id="p-123">Syntax of <code class="code-inline tex2jax_ignore">while</code> loop:</p>
<pre class="code-block tex2jax_ignore">
while (some condition) 
    (some computation)
end
</pre>
<p data-braille="continuation">The loop will repeat while condition after <code class="code-inline tex2jax_ignore">while</code> is true. It ends when this condition becomes false. So, if we want to stop when <code class="code-inline tex2jax_ignore">abs(x-y) &lt; 1e-9</code>, the loop should be written as <code class="code-inline tex2jax_ignore">while abs(x-y) &gt;= 1e-9</code>.</p>
<article class="example example-like" id="example-agm-while-loop"><a data-knowl="" class="id-ref original" data-refid="hk-example-agm-while-loop"><h6 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">4.2.1</span><span class="period">.</span><span class="space"> </span><span class="title">Arithmetic-geometric mean using a <code class="code-inline tex2jax_ignore">while</code> loop.</span>
</h6></a></article><div class="hidden-content tex2jax_ignore" id="hk-example-agm-while-loop"><article class="example example-like"><p id="p-124">Find the arithmetic-geometric mean (AGM) of two numbers given by a user, with <code class="code-inline tex2jax_ignore">1e-9</code> accuracy.</p>
<div class="solutions">
<a data-knowl="" class="id-ref original" data-refid="hk-answer-25" id="answer-25"><span class="type">Answer</span></a><div class="hidden-content tex2jax_ignore" id="hk-answer-25"><div class="answer solution-like"><pre class="code-block tex2jax_ignore">x = input('x = ');
y = input('y = ');
while abs(x-y) &gt;= 1e-9
    a = (x+y)/2;
    g = sqrt(x*y);
    x = a;
    y = g;
end
fprintf('AGM(x, y) = %.9f\n', x)
</pre></div></div>
</div></article></div>
<p id="p-125">There are two common issues with using <code class="code-inline tex2jax_ignore">while</code> loops. One is that it can go on forever, if the algorithm fails to reach its goal (the difference never becomes smaller than the tolerance). It is better to admit that the algorithm failed than to be stuck in an infinite loop: we will deal with this in <a href="section-if-statement.html" class="internal" title="Section 4.3: if statement">Section 4.3</a>. For now, note that if your program gets stuck in an infinite loop, you can terminate it by clicking within the Command Window and pressing <kbd class="kbdkey">Ctrl</kbd>+<kbd class="kbdkey">C</kbd>.</p>
<p id="p-126">Another issue is that the condition we want to test may not be defined at the beginning of the loop. This occurs when our condition for stopping is that the value of a variable essentially stopped changing. For example, one way to compute the <dfn class="terminology">golden ratio</dfn> numerically is to start with any \(x &gt; 0\) and keep replacing \(x\) with \(\sqrt{x+1}\text{.}\) If we write this as:</p>
<pre class="code-block tex2jax_ignore">x = 1;
while abs(newx - x) &gt;= 1e-9
    newx = sqrt(x+1);
    x = newx;
end
fprintf('Golden ratio = %.9f\n', x)
</pre>
<p id="p-127">the result will be an error: “Undefined function or variable ‘newx’” because we attempt to compute an expression with <code class="code-inline tex2jax_ignore">newx</code> before it is defined. Here is one way to correct this.</p>
<pre class="code-block tex2jax_ignore">x = 1;
dx = 1; 
while abs(dx) &gt;= 1e-9
    newx = sqrt(x+1);
    dx = newx - x;
    x = newx;
end
fprintf('Golden ratio = %.9f\n', x)
</pre>
<p id="p-128">Here we introduce a variable <code class="code-inline tex2jax_ignore">dx</code> that represents the difference between old and new values of <code class="code-inline tex2jax_ignore">x</code>. This variable can be initially assigned some arbitrary value that is greater than the tolerance, for example 1 or 100. This ensures that the condition <code class="code-inline tex2jax_ignore">abs(dx) &gt;= 1e-9</code> holds at the beginning of the loop. After that the loop changes the value of <code class="code-inline tex2jax_ignore">dx</code> and the process repeats until it becomes small enough.</p></section></div></main>
</div>
</body>
</html>
