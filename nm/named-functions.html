<!DOCTYPE html>
<!--**************************************-->
<!--*    Generated from PreTeXt source   *-->
<!--*    on 2020-06-28T23:19:01-04:00    *-->
<!--*                                    *-->
<!--*      https://pretextbook.org       *-->
<!--*                                    *-->
<!--**************************************-->
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Named functions</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['\\(','\\)']]
    },
    asciimath2jax: {
        ignoreClass: ".*",
        processClass: "has_am"
    },
    jax: ["input/AsciiMath"],
    extensions: ["asciimath2jax.js"],
    TeX: {
        extensions: ["extpfeil.js", "autobold.js", "https://pretextbook.org/js/lib/mathjaxknowl.js", "AMScd.js", ],
        // scrolling to fragment identifiers is controlled by other Javascript
        positionToHash: false,
        equationNumbers: { autoNumber: "none", useLabelIds: true, },
        TagSide: "right",
        TagIndent: ".8em",
    },
    // HTML-CSS output Jax to be dropped for MathJax 3.0
    "HTML-CSS": {
        scale: 88,
        mtextFontInherit: true,
    },
    CommonHTML: {
        scale: 88,
        mtextFontInherit: true,
    },
});
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML-full"></script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.13/pretext.js"></script><script src="https://pretextbook.org/js/0.13/pretext_add_on.js"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/colors_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.31/setcolors.css" rel="stylesheet" type="text/css">
<!-- 2019-10-12: Temporary - CSS file for experiments with styling --><link href="developer.css" rel="stylesheet" type="text/css">
</head>
<body class="mathbook-book has-toc has-sidebar-left">
<a class="assistive" href="#content">Skip to main content</a><div class="hidden-content" style="display:none">\(
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\)</div>
<header id="masthead" class="smallbuttons"><div class="banner"><div class="container">
<a id="logo-link" href=""></a><div class="title-container">
<h1 class="heading"><a href="numerical-methods.html"><span class="title">Numerical Methods with Programming:</span> <span class="subtitle">Lecture Notes</span></a></h1>
<p class="byline">Leonid Kovalev</p>
</div>
</div></div>
<nav id="primary-navbar" class="navbar"><div class="container">
<div class="navbar-top-buttons">
<button class="sidebar-left-toggle-button button active" aria-label="Show or hide table of contents sidebar">Contents</button><div class="tree-nav toolbar toolbar-divisor-3"><span class="threebuttons"><a id="previousbutton" class="previous-button toolbar-item button" href="section-anonymous-functions.html" title="Previous">Prev</a><a id="upbutton" class="up-button button toolbar-item" href="chapter-user-defined-functions.html" title="Up">Up</a><a id="nextbutton" class="next-button button toolbar-item" href="examples-user-defined-functions.html" title="Next">Next</a></span></div>
</div>
<div class="navbar-bottom-buttons toolbar toolbar-divisor-4">
<button class="sidebar-left-toggle-button button toolbar-item active">Contents</button><a class="previous-button toolbar-item button" href="section-anonymous-functions.html" title="Previous">Prev</a><a class="up-button button toolbar-item" href="chapter-user-defined-functions.html" title="Up">Up</a><a class="next-button button toolbar-item" href="examples-user-defined-functions.html" title="Next">Next</a>
</div>
</div></nav></header><div class="page">
<div id="sidebar-left" class="sidebar" role="navigation"><div class="sidebar-content">
<nav id="toc"><ul>
<li class="link frontmatter">
<a href="frontmatter.html" data-scroll="frontmatter"><span class="title">Front Matter</span></a><ul>
<li><a href="acknowledgement.html" data-scroll="acknowledgement">Acknowledgements</a></li>
<li><a href="preface.html" data-scroll="preface">Preface</a></li>
</ul>
</li>
<li class="link part"><a href="part-matlab.html" data-scroll="part-matlab"><span class="codenumber">I</span> <span class="title">Using Matlab</span></a></li>
<li class="link">
<a href="chapter-scalars-vectors-matrices.html" data-scroll="chapter-scalars-vectors-matrices"><span class="codenumber">1</span> <span class="title">Scalars, vectors and matrices</span></a><ul>
<li><a href="section-matlab-interface.html" data-scroll="section-matlab-interface">Matlab interface</a></li>
<li><a href="section-scalars.html" data-scroll="section-scalars">Assigning scalar values</a></li>
<li><a href="section-vectors-matrices.html" data-scroll="section-vectors-matrices">Creating vectors and matrices</a></li>
<li><a href="section-operations-vectors-matrices.html" data-scroll="section-operations-vectors-matrices">Operations on vectors and matrices</a></li>
<li><a href="section-indexing-vectors-matrices.html" data-scroll="section-indexing-vectors-matrices">Accessing the entries of vectors and matrices</a></li>
<li><a href="examples-matrices-vectors.html" data-scroll="examples-matrices-vectors">End-of-class examples</a></li>
<li><a href="exercises-matrices-vectors.html" data-scroll="exercises-matrices-vectors">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="chapter-systems-vectorization-plots.html" data-scroll="chapter-systems-vectorization-plots"><span class="codenumber">2</span> <span class="title">Linear systems, array operations, plots</span></a><ul>
<li><a href="section-linear-systems.html" data-scroll="section-linear-systems">Systems of linear equations</a></li>
<li><a href="section-large-matrices.html" data-scroll="section-large-matrices">More tools for constructing matrices</a></li>
<li><a href="section-vectorization.html" data-scroll="section-vectorization">Array operations</a></li>
<li><a href="section-plotting.html" data-scroll="section-plotting">Plotting</a></li>
<li><a href="examples-systems-vectorization-plots.html" data-scroll="examples-systems-vectorization-plots">End-of-class examples</a></li>
<li><a href="exercises-systems-vectorization-plots.html" data-scroll="exercises-systems-vectorization-plots">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="chapter-functions-input-output.html" data-scroll="chapter-functions-input-output"><span class="codenumber">3</span> <span class="title">Built-in functions, input, output</span></a><ul>
<li><a href="section-builtin-functions.html" data-scroll="section-builtin-functions">Built-in functions</a></li>
<li><a href="section-random-numbers-histograms.html" data-scroll="section-random-numbers-histograms">Random numbers and histograms</a></li>
<li><a href="section-user-input.html" data-scroll="section-user-input">User input</a></li>
<li><a href="section-formatted-output.html" data-scroll="section-formatted-output">Formatted output</a></li>
<li><a href="examples-functions-input-output.html" data-scroll="examples-functions-input-output">End-of-class examples</a></li>
<li><a href="exercises-functions-input-output.html" data-scroll="exercises-functions-input-output">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="chapter-control-flow.html" data-scroll="chapter-control-flow"><span class="codenumber">4</span> <span class="title">Control flow: loops and conditional statements</span></a><ul>
<li><a href="section-for-loop.html" data-scroll="section-for-loop"><code class="code-inline tex2jax_ignore">for</code> loop</a></li>
<li><a href="section-while-loop.html" data-scroll="section-while-loop"><code class="code-inline tex2jax_ignore">while</code> loop</a></li>
<li><a href="section-if-statement.html" data-scroll="section-if-statement"><code class="code-inline tex2jax_ignore">if</code> statement</a></li>
<li><a href="section-break-statement.html" data-scroll="section-break-statement">Breaking out of a loop</a></li>
<li><a href="examples-control-flow.html" data-scroll="examples-control-flow">End-of-class examples</a></li>
<li><a href="exercises-control-flow.html" data-scroll="exercises-control-flow">Homework</a></li>
</ul>
</li>
<li class="link">
<a href="chapter-user-defined-functions.html" data-scroll="chapter-user-defined-functions"><span class="codenumber">5</span> <span class="title">User-defined functions</span></a><ul>
<li><a href="section-anonymous-functions.html" data-scroll="section-anonymous-functions">Anonymous functions</a></li>
<li><a href="named-functions.html" data-scroll="named-functions" class="active">Named functions</a></li>
<li><a href="examples-user-defined-functions.html" data-scroll="examples-user-defined-functions">End-of-class examples</a></li>
<li><a href="exercises-user-defined-functions.html" data-scroll="exercises-user-defined-functions">Homework</a></li>
</ul>
</li>
<li class="link part"><a href="part-equations.html" data-scroll="part-equations"><span class="codenumber">II</span> <span class="title">Solving Equations</span></a></li>
<li class="link part"><a href="part-calculus.html" data-scroll="part-calculus"><span class="codenumber">III</span> <span class="title">Numerical Calculus</span></a></li>
<li class="link part"><a href="part-data.html" data-scroll="part-data"><span class="codenumber">IV</span> <span class="title">Modeling Data</span></a></li>
<li class="link part"><a href="part-optimization.html" data-scroll="part-optimization"><span class="codenumber">V</span> <span class="title">Optimization</span></a></li>
</ul></nav><div class="extras"><nav><a class="mathbook-link" href="https://pretextbook.org">Authored in PreTeXt</a><a href="https://www.mathjax.org"><img title="Powered by MathJax" src="https://www.mathjax.org/badge/badge.gif" alt="Powered by MathJax"></a></nav></div>
</div></div>
<main class="main"><div id="content" class="pretext-content"><section class="section" id="named-functions"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">5.2</span> <span class="title">Named functions</span>
</h2>
<p id="p-156">Named functions can do the same thing as anonymous functions. Here is \(\exp(-x^2)\) again, this time as a named function.</p>
<pre class="code-block tex2jax_ignore">function y = f(x) 
    y = exp(-x.^2);
end
</pre>
<p id="p-157">But there may be multiple lines within the body of a named function, including loops and conditional statements. In general, it looks like this.</p>
<pre class="code-block tex2jax_ignore">function y = myFunction(x)
    (do something);
    (do more things);
    (y = result of computations);  
end
</pre>
<p id="p-158">A named functions can have multiple inputs: <code class="code-inline tex2jax_ignore">function w = myFunction(x, y, z)</code>. It can also have multiple outputs: <code class="code-inline tex2jax_ignore">function [u, v] = myFunction(x, y, z)</code> in which case both <code class="code-inline tex2jax_ignore">u</code> and <code class="code-inline tex2jax_ignore">v</code> must be assigned some values within the function.</p>
<article class="example example-like" id="agm-named-function"><a data-knowl="" class="id-ref original" data-refid="hk-agm-named-function"><h6 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">5.2.1</span><span class="period">.</span><span class="space"> </span><span class="title">Arithmetic-geometric mean with given tolerance.</span>
</h6></a></article><div class="hidden-content tex2jax_ignore" id="hk-agm-named-function"><article class="example example-like"><p id="p-159">Write a named function with three inputs: numbers <code class="code-inline tex2jax_ignore">x, y</code> and <code class="code-inline tex2jax_ignore">tol</code>, which finds the arithmetic-geometric mean of <code class="code-inline tex2jax_ignore">a, b</code> with tolerance <code class="code-inline tex2jax_ignore">tol</code> (meaning that the process stops when the difference of arithmetic and geometric mean is less than <code class="code-inline tex2jax_ignore">tol</code>.)</p>
<div class="solutions">
<a data-knowl="" class="id-ref original" data-refid="hk-answer-30" id="answer-30"><span class="type">Answer</span></a><div class="hidden-content tex2jax_ignore" id="hk-answer-30"><div class="answer solution-like">
<pre class="code-block tex2jax_ignore">function z = agm(x, y, tol) 
   while abs(x - y) &gt;= tol
       a = (x + y)/2;
       g = sqrt(x*y);
       x = a;
       y = g;
   end
   z = x;
end
</pre>
<p id="p-160">Note that the result has to be assigned to whichever function variable was designated as output on th first line of the function: in this case, <code class="code-inline tex2jax_ignore">z</code>.</p>
</div></div>
</div></article></div>
<p id="p-161"><a class="xref" data-knowl="./knowl/agm-named-function.html" title="Example 5.2.1: Arithmetic-geometric mean with given tolerance">Example 5.2.1</a> illustrates an important point: a function has limited communication with the code outside of it. It receives input and produces certain output; nothing else that it does has any influence on the outside world. Suppose that the following sequence of commands was executed.</p>
<pre class="code-block tex2jax_ignore">x = 0.3;
y = 12;
disp(agm(x, y, 1e-6))
disp(x)
disp(a)
</pre>
<p id="p-162">The third line will display the AGM which happens to be 3.7136. The fourth line will display the original value of x, which is <code class="code-inline tex2jax_ignore">0.3</code>. Why is it still 0.3, even though the function <code class="code-inline tex2jax_ignore">agm</code> changed the value of x in the loop? This is because a function operates like a separate program with its own variables. The variable x inside of the function is its own <em class="emphasis">local</em> variable x, and changing it does not change x in other places. For the same reason, the last command <code class="code-inline tex2jax_ignore">disp(a)</code> produces an error: the variable <code class="code-inline tex2jax_ignore">a</code> is undefined. A variable with that name was introduces inside of function <code class="code-inline tex2jax_ignore">agm</code> but it does not exist outside of it.</p>
<p id="p-163">One can have a function that does not return any values. Here is a function whose job is to plot the sine function on the interval \([a, b]\) using a given number of points.</p>
<pre class="code-block tex2jax_ignore">function plotsin(a, b, num) 
    x = linspace(a, b, num);
    plot(x, sin(x))
end
</pre>
<p id="p-164">One can also have a function with no arguments (no input values). For example, this function computes an approximate value of the Golden Ratio by iterating \(\sqrt{x+1}\text{.}\)</p>
<pre class="code-block tex2jax_ignore">function z = goldenratio() 
   z = 1;
   for k = 1:100
       z = sqrt(z+1);
   end
end
</pre>
<p id="p-165">One can use this function same as others: <code class="code-inline tex2jax_ignore">x = goldenratio();</code> or <code class="code-inline tex2jax_ignore">disp(goldenratio())</code>.</p>
<p id="p-166">Back in the days when Matlab was designed, the convention was to put every function in a separate “M-file” named as that function: for example, <code class="code-inline tex2jax_ignore">goldenratio.m</code>. Today, tying the name of a function to the name of a file in which it is contained seems strange but Matlab still insists on this. Fortunately, it allows us to have multiple functions in the same script file, with the following constraints:</p>
<ul class="disc">
<li id="li-56">The first function is named as the file itself. This function gets executed when we click Run or press <kbd class="kbdkey">F5</kbd>.</li>
<li id="li-57">If a script contains named functions, all of its code must be within some function.</li>
</ul>
<p data-braille="continuation">This means that if a script contains named functions, and is saved in a file named <code class="code-inline tex2jax_ignore">hw5.m</code>, it must begin with <code class="code-inline tex2jax_ignore">function hw5()</code>, for example:</p>
<pre class="code-block tex2jax_ignore">function hw5()
    x = 0.3;
    y = 12;
    disp(agm(x, y, 1e-6))
end

function z = agm(x, y, tol) 
   while abs(x - y) &gt;= tol
       a = (x + y)/2;
       g = sqrt(x*y);
       x = a;
       y = g;
   end
   z = x;
end
</pre>
<p id="p-167">Here the first (main) function is executed: it assigns values to x and y, and then calls another function to compute their AGM.</p>
<p id="p-168">Anonymous functions, described in <a href="section-anonymous-functions.html" class="internal" title="Section 5.1: Anonymous functions">Section 5.1</a>, have no such restrictions.</p>
<article class="example example-like" id="example-31"><a data-knowl="" class="id-ref original" data-refid="hk-example-31"><h6 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">5.2.2</span><span class="period">.</span><span class="space"> </span><span class="title">Smallest prime that is greater than a given number.</span>
</h6></a></article><div class="hidden-content tex2jax_ignore" id="hk-example-31"><article class="example example-like"><p id="p-169">Write a function which, given a value <code class="code-inline tex2jax_ignore">n</code>, finds the smallest prime number that is greater than <code class="code-inline tex2jax_ignore">n</code>.</p>
<p id="p-170">To determine whether some number <code class="code-inline tex2jax_ignore">k</code> is prime, use <code class="code-inline tex2jax_ignore">isprime(k)</code>. For example, <code class="code-inline tex2jax_ignore">while isprime(k)</code> is a loop that runs as long as <code class="code-inline tex2jax_ignore">k</code> stays prime. To have a loop that runs while <code class="code-inline tex2jax_ignore">k</code> is <em class="emphasis">not</em> prime, use <code class="code-inline tex2jax_ignore">while ~sprime(k)</code>. The character <code class="code-inline tex2jax_ignore">~</code> means logical NOT in Matlab (recall that <code class="code-inline tex2jax_ignore">~=</code> means “not equal”.)</p>
<div class="solutions">
<a data-knowl="" class="id-ref original" data-refid="hk-answer-31" id="answer-31"><span class="type">Answer</span></a><div class="hidden-content tex2jax_ignore" id="hk-answer-31"><div class="answer solution-like">
<pre class="code-block tex2jax_ignore">function k = smallestprime(n)
    k = n + 1;
    while ~isprime(k)
        k = k + 1;
    end
end
</pre>
<p id="p-171">For example, <code class="code-inline tex2jax_ignore">smallestprime(31)</code> is 37, because the numbers 32, 33, 34, 35, 36 are not prime.</p>
</div></div>
</div></article></div></section></div></main>
</div>
</body>
</html>
